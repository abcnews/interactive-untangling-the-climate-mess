import React from "react";
import Portal from "react-portal";
import a2o from "@abcnews/alternating-case-to-object";

import styles from "./styles.scss";

const BackgroundShape = ({ color = "#2A4059" }) => {
  return (
    <div className={styles.svgContainer}>
      <svg
        width="283"
        height="34"
        viewBox="0 0 283 34"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        preserveAspectRatio="none"
      >
        <path
          d="M248.979 17.4325C249.071 17.6258 249.125 17.7628 249.156 17.8502C249.109 17.9813 249.034 18.1644 248.922 18.4037C248.622 19.0395 248.147 19.8744 247.496 20.8756C246.2 22.8692 244.383 25.2593 242.397 27.5927C241.787 28.3084 241.169 29.0107 240.553 29.6873C239.966 30.3305 239.143 30.708 238.243 30.7448C199.063 32.3445 141.901 32.5 134.771 32.5C129.68 32.5 102.847 32.267 75.5902 31.8035C61.9627 31.5718 48.2359 31.2825 37.0718 30.9363C25.8648 30.5887 17.3433 30.1858 14.0507 29.7382C9.36789 29.1015 6.40067 26.9045 4.57585 24.2937C2.7204 21.6391 2 18.4834 2 15.9592C2 12.7075 3.4612 10.3699 6.05261 8.61427C8.72261 6.80539 12.5836 5.63446 17.208 4.95337C21.1474 4.37317 35.9666 3.50688 57.6636 2.78726C79.3047 2.06948 107.685 1.50028 138.675 1.5C152.106 1.90347 169.135 2.18681 183.29 2.42233C188.997 2.51729 194.236 2.60447 198.585 2.68862C215.045 3.00714 223.873 3.28305 235.364 3.7739C236.169 3.80831 236.93 4.1173 237.512 4.64613C239.357 6.32251 241.294 8.17302 243.072 10.0148C244.99 12.0022 246.64 13.894 247.783 15.4925C248.392 16.3436 248.765 16.9866 248.979 17.4325ZM249.212 17.6683C249.213 17.6676 249.213 17.6672 249.213 17.6674L249.212 17.6683ZM275.31 9.5422L275.31 9.54271L275.396 9.63901C277.107 11.5712 278.558 13.4403 279.56 15.084C280.557 16.7192 280.861 17.7344 280.898 18.1955C280.895 18.2073 280.892 18.221 280.887 18.2366C280.849 18.3778 280.775 18.5991 280.646 18.9085C280.386 19.5307 279.975 20.3389 279.413 21.3007C278.319 23.1752 276.788 25.4031 275.097 27.5818C275.057 27.5977 275.004 27.6166 274.938 27.6369C274.826 27.6714 274.703 27.7013 274.588 27.7242C274.47 27.7477 274.384 27.7591 274.345 27.7625C271.37 28.0275 269.422 28.2796 267.61 28.5142C267.5 28.5284 267.392 28.5425 267.283 28.5565C268.051 27.5912 268.761 26.6192 269.383 25.6598C270.72 23.5961 272 21.0639 272 18.5712C272 16.0511 270.674 13.5502 269.319 11.5445C268.065 9.68909 266.83 8.38143 265.283 6.78506C266.287 6.97138 267.289 7.16458 268.348 7.36897C269.73 7.63549 271.21 7.92103 272.923 8.23518C273.867 8.40811 274.708 8.86537 275.31 9.5422ZM249.467 30.093C250.875 28.3211 252.172 26.5486 253.228 24.9242C253.991 23.7495 254.671 22.5876 255.173 21.5207C255.617 20.5779 256.151 19.2503 256.151 17.906C256.151 16.6467 255.746 15.4074 255.223 14.3009C254.694 13.1832 253.998 12.1044 253.311 11.1449C251.833 9.07839 249.866 6.85009 247.807 4.71715C247.754 4.66207 247.701 4.607 247.647 4.55194C247.741 4.55625 247.834 4.56057 247.928 4.5649C249.819 4.65211 251.79 4.74305 253.214 4.83898C253.503 4.85845 253.802 4.97812 254.064 5.19947C254.58 5.63474 255.117 6.07784 255.66 6.5254C257.274 7.85497 258.935 9.22382 260.211 10.5429C261.987 12.3793 262.815 13.5046 263.922 15.1428C264.44 15.91 264.799 16.6756 265.026 17.3188C265.263 17.9928 265.323 18.4386 265.323 18.5712C265.323 18.8865 265.062 19.8932 263.906 21.6779C262.838 23.327 261.295 25.2037 259.497 27.1132C258.918 27.7275 258.323 28.3356 257.719 28.9304C257.163 29.4793 256.419 29.8033 255.626 29.8415C254.252 29.9078 252.586 29.9721 250.953 30.0352C250.452 30.0546 249.953 30.0738 249.467 30.093Z"
          stroke={color}
          strokeWidth="3"
        />
      </svg>
    </div>
  );
};

type SkipAheadProps = { mount?: any; scroll: any; applySkipAhead: any };

const SkipAhead: React.FC<SkipAheadProps> = ({
  mount,
  scroll,
  applySkipAhead,
  ...props
}) => {
  const { id } = mount;
  const config = a2o(id || "TOundefined");
  const { from, to } = config;
  const target = document.getElementById(to);

  function getQuestionKey(shortId: string) {
    switch (shortId) {
      case "renewables":
        return "SUBQ1-renewables-zero-carbon";
      case "agriculture":
        return "SUBQ2-livestock-emissions";
      case "transport":
        return "SUBQ3-transportation-off-fossil";
      case "industry":
        return "SUBQ4-industry-emissions";
    }

    return null;
  }

  return (
    <div className={styles.root}>
      <div className={styles.backgroundContainer}>
        <button
          className={styles.button}
          onClick={() => {
            scroll.animateScroll(target);
            applySkipAhead(getQuestionKey(from));
          }}
          style={
            {
              // color: calculatedColor
            }
          }
        >
          {"Skip ahead"}
        </button>
        <div className={styles.organicBackground}>
          <BackgroundShape

          // color={

          //      "rgba(63, 82, 104, 0.5)"

          // }
          />
        </div>
      </div>
    </div>
  );
};

export default SkipAhead;
